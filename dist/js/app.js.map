{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","assets/js/app.js","assets/js/cfg.js","assets/js/modules/App.js","assets/js/modules/Controller.js","assets/js/modules/Store.js","assets/js/modules/Utils.js","assets/js/modules/View.js"],"names":[],"mappings":"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","file":"app.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","/*jshint esversion: 6 */\n\nimport App from './modules/App.js';\n\n(() => {\n\t'use strict';\n\n\tconst app = new App();\n\n})(App);","/*jshint esversion: 6 */\n\nconst config = {\n\tfunda: {\n\t\tkey: '271175433a7c4fe2a45750d385dd9bfd',\n\t\tbaseUrls: {\n\t\t\tsearch: '//funda.kyrandia.nl/feeds/Aanbod.svc/json',\n\t\t\tobjects: '//funda.kyrandia.nl/feeds/Aanbod.svc/json',\n\t\t\tautoSuggest: '//zb.funda.info/frontend/json',\n\t\t\tmap: '//mt1.funda.nl/maptiledata.ashx/json'\n\t\t}\n\t},\n\tgoogle: {\n\t\tkey: 'AIzaSyA5emTbr8ytwvzrw9NQW7zlXg1NubeDG5M',\n\t\tbaseUrls: {\n\t\t\tmaps: 'https://maps.googleapis.com/maps/api/geocode/json',\n\t\t\troads: 'https://roads.googleapis.com/v1/nearestRoads'\n\t\t}\n\t},\n\tgeoNames: {\n\t\tbaseUrl: 'http://api.geonames.org/findNearbyStreetsOSMJSON?formatted=true&style=full',\n\t\tuserName: 'frankwarnaar@gmail.com'\n\t}\n};\n\nexport default config;","/*jshint esversion: 6 */\n\nimport config from '../cfg.js';\nimport Controller from './Controller.js';\nimport View from './View.js';\nimport Store from './Store.js';\nimport Utils from './Utils.js';\n\nclass App {\n\tconstructor() {\n\t\tthis.config     = config;\n\t\tthis.controller = new Controller(this);\n\t\tthis.view       = new View(this);\n\t\tthis.store      = new Store(this);\n\t\tthis.utils      = new Utils();\n\t\tthis.init();\n\t}\n\n\tgetCoords() {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tif (navigator.geolocation.getCurrentPosition) {\n\t\t\t\tnavigator.geolocation.getCurrentPosition(data => {\n\t\t\t\t\tresolve(data.coords);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\treject(`Couldn't get the location from your browser`);\n\t\t\t}\n\t\t});\n\t}\n\n\tfetchRequest(url) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tfetch(url)\n\t\t\t.then(response => {\n\t\t\t\tif (response.status !== 200) {\n\t\t\t\t\treject(response.status);\n\t\t\t\t} else {\n\t\t\t\t\t// Examine the text in the response\n\t\t\t\t\tresponse.json().then((data) => {\n\t\t\t\t\t\tresolve(data);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\treject(err);\n\t\t\t});\n\t\t});\n\t}\n\n\thandleRequest(method, url) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tvar xhr = new XMLHttpRequest();\n\n\t\t\txhr.open(method, url);\n\n\t\t\txhr.onload = function() {\n\t\t\t\tif (this.status >= 200 && this.status < 300) {\n\t\t\t\t\tresolve(JSON.parse(xhr.responseText));\n\t\t\t\t} else {\n\t\t\t\t\treject({status: this.status, statusText: xhr.statusText});\n\t\t\t\t}\n\t\t\t};\n\n\t\t\txhr.onerror = function() {\n\t\t\t\treject({status: this.status, statusText: xhr.statusText});\n\t\t\t};\n\n\t\t\txhr.send();\n\t\t});\n\t}\n\n\tinit() {\n\t\tthis.controller.init();\n\t}\n}\n\nexport default App;","/*jshint esversion: 6 */\n\nclass Controller {\n\tconstructor(app) {\n\t\tthis.app = app;\n\t}\n\n\tinit() {\n\t\tthis.app.view.render();\n\t}\n}\n\nexport default Controller;","/*jshint esversion: 6 */\n\nclass Store {\n\tconstructor(app) {\n\t\tthis.app = app;\n\t}\n\n\tgetObjectsNearby() {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis.app.getCoords()\n\t\t\t\t.then(coords => {\n\t\t\t\t\t// Get the first address matching the coordinates\n\n\t\t\t\t\tconst getStreets = this.app.handleRequest('GET', `${this.app.config.geoNames.baseUrl}&lat=${coords.latitude}&lng=${coords.longitude}&username=${this.app.config.geoNames.userName}`);\n\t\t\t\t\tconst getCity = this.app.handleRequest('GET', `${this.app.config.google.baseUrls.maps}?latlng=${coords.latitude},${coords.longitude}&key=${this.app.config.google.key}`);\n\n\t\t\t\t\tPromise.all([getStreets, getCity])\n\t\t\t\t.then(results => {\n\t\t\t\t\tlet streets = results[0];\n\t\t\t\t\tlet city = results[1];\n\n\t\t\t\t\tstreets = streets.streetSegment.map(street => {\n\t\t\t\t\t\treturn street.name;\n\t\t\t\t\t});\n\t\t\t\t\tstreets = [...new Set(streets)];\n\t\t\t\t\tstreets = this.app.utils.filterArray(streets, '0');\n\n\t\t\t\t\tcity = city.results[0];\n\t\t\t\t\tcity = this.app.utils.buildAddress(city.address_components);\n\n\t\t\t\t\tconst objectReqs = streets.map(street => {\n\t\t\t\t\t\treturn this.app.fetchRequest(`${this.app.config.funda.baseUrls.search}/${this.app.config.funda.key}?type=koop&zo=/${city}/${street}&page=1&pagesize=25`);\n\t\t\t\t\t});\n\n\t\t\t\t\tPromise.all(objectReqs)\n\t\t\t\t.then(results => {\n\t\t\t\t\t\tconst streets = results.map(street => {\n\t\t\t\t\t\t\treturn street.Objects;\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\t// source array concatenation solution: http://stackoverflow.com/questions/27266550/how-to-flatten-nested-array-in-javascript#answer-37469411\n\t\t\t\t\t\tconst objects = [].concat.apply([], streets);\n\n\t\t\t\t\t\tresolve(objects);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\treject(error);\n\t\t\t});\n\t\t});\n\t}\n}\n\nexport default Store;","/*jshint esversion: 6 */\nclass Utils {\n\tbuildAddress(components) {\n\t\tcomponents = components.filter(component => {\n\t\t\t// return component.types.includes('route') || component.types.includes('locality');\n\t\t\treturn component.types.includes('locality');\n\t\t});\n\n\t\tcomponents = components.map(component => {\n\t\t\treturn component.long_name;\n\t\t});\n\n\t\treturn components.reduce((buffer, current) => {\n\t\t\treturn `${buffer}/${current}`;\n\t\t});\n\t}\n\n\t// Remove item from array if it contains a subtring\n\tfilterArray(array, substring) {\n\t\treturn array.filter(item => {\n\t\t\treturn (!item.includes(substring));\n\t\t});\n\t}\n}\n\nexport default Utils;","/*jshint esversion: 6 */\n\nclass View {\n\tconstructor(app) {\n\t\tthis.app = app;\n\t}\n\n\trender() {\n\t\tthis.app.store.getObjectsNearby()\n\t\t\t.then(objects => {\n\t\t\t\tconst $results = document.querySelector('.results');\n\t\t\t\tconst $resultsList = document.querySelector('#results-list');\n\n\t\t\t\tobjects.map(object => {\n\t\t\t\t\tconst listItem = `\n\t\t\t\t\t<li class=\"object\">\n\t\t\t\t\t\t<img src=\"${object.FotoLarge}\" alt=\"${object.Adres}\">\n\t\t\t\t\t\t<a href=\"#details/${object.GlobalId}\">\n\t\t\t\t\t\t\t<h3>${object.Adres}</h3>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<span>€${object.Koopprijs.toLocaleString('currency')}</span>\n\t\t\t\t\t</li>\n\t\t\t\t\t`;\n\t\t\t\t\tconsole.log(listItem);\n\t\t\t\t\t$resultsList.insertAdjacentHTML('beforeend', `${listItem}`);\n\t\t\t\t});\n\n\t\t\t\t$results.classList.remove('hidden');\n\t\t\t\tthis.showLoader(false);\n\t\t\t})\n\t\t\t.catch(err => {\n\t\t\t\tconsole.log(err);\n\t\t\t});\n\t}\n\n\tshowLoader(show) {\n\t\tconst loader =  document.querySelector('.loader-container');\n\t\tif (show) {\n\t\t\tloader.classList.remove('hidden');\n\t\t} else {\n\t\t\tloader.classList.add('hidden');\n\t\t}\n\t}\n}\n\nexport default View;"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJhc3NldHMvanMvYXBwLmpzIiwiYXNzZXRzL2pzL2NmZy5qcyIsImFzc2V0cy9qcy9tb2R1bGVzL0FwcC5qcyIsImFzc2V0cy9qcy9tb2R1bGVzL0NvbnRyb2xsZXIuanMiLCJhc3NldHMvanMvbW9kdWxlcy9TdG9yZS5qcyIsImFzc2V0cy9qcy9tb2R1bGVzL1V0aWxzLmpzIiwiYXNzZXRzL2pzL21vZHVsZXMvVmlldy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7O0FDRUE7Ozs7OztBQUVBLENBQUMsWUFBTTtBQUNOOztBQUVBLEtBQU0sTUFBTSxtQkFBWjtBQUVBLENBTEQsaUIsQ0FKQTs7Ozs7Ozs7QUNBQTs7QUFFQSxJQUFNLFNBQVM7QUFDZCxRQUFPO0FBQ04sT0FBSyxrQ0FEQztBQUVOLFlBQVU7QUFDVCxXQUFRLDJDQURDO0FBRVQsWUFBUywyQ0FGQTtBQUdULGdCQUFhLCtCQUhKO0FBSVQsUUFBSztBQUpJO0FBRkosRUFETztBQVVkLFNBQVE7QUFDUCxPQUFLLHlDQURFO0FBRVAsWUFBVTtBQUNULFNBQU0sbURBREc7QUFFVCxVQUFPO0FBRkU7QUFGSCxFQVZNO0FBaUJkLFdBQVU7QUFDVCxXQUFTLDRFQURBO0FBRVQsWUFBVTtBQUZEO0FBakJJLENBQWY7O2tCQXVCZSxNOzs7Ozs7Ozs7cWpCQ3pCZjs7QUFFQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7Ozs7OztJQUVNLEc7QUFDTCxnQkFBYztBQUFBOztBQUNiLE9BQUssTUFBTDtBQUNBLE9BQUssVUFBTCxHQUFrQix5QkFBZSxJQUFmLENBQWxCO0FBQ0EsT0FBSyxJQUFMLEdBQWtCLG1CQUFTLElBQVQsQ0FBbEI7QUFDQSxPQUFLLEtBQUwsR0FBa0Isb0JBQVUsSUFBVixDQUFsQjtBQUNBLE9BQUssS0FBTCxHQUFrQixxQkFBbEI7QUFDQSxP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S0FGeEMsMENBR2UsT0FBTyxRQUh0Qiw4QkFJRSxPQUFPLEtBSlQseURBTUksT0FBTyxTQUFQLENBQWlCLGNBQWpCLENBQWdDLFVBQWhDLENBTkoseUNBQU47QUFTQSxhQUFRLEdBQVIsQ0FBWSxRQUFaO0FBQ0Esa0JBQWEsa0JBQWIsQ0FBZ0MsV0FBaEMsT0FBZ0QsUUFBaEQ7QUFDQSxLQVpEOztBQWNBLGFBQVMsU0FBVCxDQUFtQixNQUFuQixDQUEwQixRQUExQjtBQUNBLFVBQUssVUFBTCxDQUFnQixLQUFoQjtBQUNBLElBckJGLEVBc0JFLEtBdEJGLENBc0JRLGVBQU87QUFDYixZQUFRLEdBQVIsQ0FBWSxHQUFaO0FBQ0EsSUF4QkY7QUF5QkE7Ozs2QkFFVSxJLEVBQU07QUFDaEIsT0FBTSxTQUFVLFNBQVMsYUFBVCxDQUF1QixtQkFBdkIsQ0FBaEI7QUFDQSxPQUFJLElBQUosRUFBVTtBQUNULFdBQU8sU0FBUCxDQUFpQixNQUFqQixDQUF3QixRQUF4QjtBQUNBLElBRkQsTUFFTztBQUNOLFdBQU8sU0FBUCxDQUFpQixHQUFqQixDQUFxQixRQUFyQjtBQUNBO0FBQ0Q7Ozs7OztrQkFHYSxJIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIi8qanNoaW50IGVzdmVyc2lvbjogNiAqL1xuXG5pbXBvcnQgQXBwIGZyb20gJy4vbW9kdWxlcy9BcHAuanMnO1xuXG4oKCkgPT4ge1xuXHQndXNlIHN0cmljdCc7XG5cblx0Y29uc3QgYXBwID0gbmV3IEFwcCgpO1xuXG59KShBcHApOyIsIi8qanNoaW50IGVzdmVyc2lvbjogNiAqL1xuXG5jb25zdCBjb25maWcgPSB7XG5cdGZ1bmRhOiB7XG5cdFx0a2V5OiAnMjcxMTc1NDMzYTdjNGZlMmE0NTc1MGQzODVkZDliZmQnLFxuXHRcdGJhc2VVcmxzOiB7XG5cdFx0XHRzZWFyY2g6ICcvL2Z1bmRhLmt5cmFuZGlhLm5sL2ZlZWRzL0FhbmJvZC5zdmMvanNvbicsXG5cdFx0XHRvYmplY3RzOiAnLy9mdW5kYS5reXJhbmRpYS5ubC9mZWVkcy9BYW5ib2Quc3ZjL2pzb24nLFxuXHRcdFx0YXV0b1N1Z2dlc3Q6ICcvL3piLmZ1bmRhLmluZm8vZnJvbnRlbmQvanNvbicsXG5cdFx0XHRtYXA6ICcvL210MS5mdW5kYS5ubC9tYXB0aWxlZGF0YS5hc2h4L2pzb24nXG5cdFx0fVxuXHR9LFxuXHRnb29nbGU6IHtcblx0XHRrZXk6ICdBSXphU3lBNWVtVGJyOHl0d3Z6cnc5TlFXN3psWGcxTnViZURHNU0nLFxuXHRcdGJhc2VVcmxzOiB7XG5cdFx0XHRtYXBzOiAnaHR0cHM6Ly9tYXBzLmdvb2dsZWFwaXMuY29tL21hcHMvYXBpL2dlb2NvZGUvanNvbicsXG5cdFx0XHRyb2FkczogJ2h0dHBzOi8vcm9hZHMuZ29vZ2xlYXBpcy5jb20vdjEvbmVhcmVzdFJvYWRzJ1xuXHRcdH1cblx0fSxcblx0Z2VvTmFtZXM6IHtcblx0XHRiYXNlVXJsOiAnaHR0cDovL2FwaS5nZW9uYW1lcy5vcmcvZmluZE5lYXJieVN0cmVldHNPU01KU09OP2Zvcm1hdHRlZD10cnVlJnN0eWxlPWZ1bGwnLFxuXHRcdHVzZXJOYW1lOiAnZnJhbmt3YXJuYWFyQGdtYWlsLmNvbSdcblx0fVxufTtcblxuZXhwb3J0IGRlZmF1bHQgY29uZmlnOyIsIi8qanNoaW50IGVzdmVyc2lvbjogNiAqL1xuXG5pbXBvcnQgY29uZmlnIGZyb20gJy4uL2NmZy5qcyc7XG5pbXBvcnQgQ29udHJvbGxlciBmcm9tICcuL0NvbnRyb2xsZXIuanMnO1xuaW1wb3J0IFZpZXcgZnJvbSAnLi9WaWV3LmpzJztcbmltcG9ydCBTdG9yZSBmcm9tICcuL1N0b3JlLmpzJztcbmltcG9ydCBVdGlscyBmcm9tICcuL1V0aWxzLmpzJztcblxuY2xhc3MgQXBwIHtcblx0Y29uc3RydWN0b3IoKSB7XG5cdFx0dGhpcy5jb25maWcgICAgID0gY29uZmlnO1xuXHRcdHRoaXMuY29udHJvbGxlciA9IG5ldyBDb250cm9sbGVyKHRoaXMpO1xuXHRcdHRoaXMudmlldyAgICAgICA9IG5ldyBWaWV3KHRoaXMpO1xuXHRcdHRoaXMuc3RvcmUgICAgICA9IG5ldyBTdG9yZSh0aGlzKTtcblx0XHR0aGlzLnV0aWxzICAgICAgPSBuZXcgVXRpbHMoKTtcblx0XHR0aGlzLmluaXQoKTtcblx0fVxuXG5cdGdldENvb3JkcygpIHtcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdFx0aWYgKG5hdmlnYXRvci5nZW9sb2NhdGlvbi5nZXRDdXJyZW50UG9zaXRpb24pIHtcblx0XHRcdFx0bmF2aWdhdG9yLmdlb2xvY2F0aW9uLmdldEN1cnJlbnRQb3NpdGlvbihkYXRhID0+IHtcblx0XHRcdFx0XHRyZXNvbHZlKGRhdGEuY29vcmRzKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZWplY3QoYENvdWxkbid0IGdldCB0aGUgbG9jYXRpb24gZnJvbSB5b3VyIGJyb3dzZXJgKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cdGZldGNoUmVxdWVzdCh1cmwpIHtcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdFx0ZmV0Y2godXJsKVxuXHRcdFx0LnRoZW4ocmVzcG9uc2UgPT4ge1xuXHRcdFx0XHRpZiAocmVzcG9uc2Uuc3RhdHVzICE9PSAyMDApIHtcblx0XHRcdFx0XHRyZWplY3QocmVzcG9uc2Uuc3RhdHVzKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQvLyBFeGFtaW5lIHRoZSB0ZXh0IGluIHRoZSByZXNwb25zZVxuXHRcdFx0XHRcdHJlc3BvbnNlLmpzb24oKS50aGVuKChkYXRhKSA9PiB7XG5cdFx0XHRcdFx0XHRyZXNvbHZlKGRhdGEpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9KVxuXHRcdFx0LmNhdGNoKChlcnIpID0+IHtcblx0XHRcdFx0cmVqZWN0KGVycik7XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fVxuXG5cdGhhbmRsZVJlcXVlc3QobWV0aG9kLCB1cmwpIHtcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdFx0dmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXG5cdFx0XHR4aHIub3BlbihtZXRob2QsIHVybCk7XG5cblx0XHRcdHhoci5vbmxvYWQgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKHRoaXMuc3RhdHVzID49IDIwMCAmJiB0aGlzLnN0YXR1cyA8IDMwMCkge1xuXHRcdFx0XHRcdHJlc29sdmUoSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KSk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0cmVqZWN0KHtzdGF0dXM6IHRoaXMuc3RhdHVzLCBzdGF0dXNUZXh0OiB4aHIuc3RhdHVzVGV4dH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXG5cdFx0XHR4aHIub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZWplY3Qoe3N0YXR1czogdGhpcy5zdGF0dXMsIHN0YXR1c1RleHQ6IHhoci5zdGF0dXNUZXh0fSk7XG5cdFx0XHR9O1xuXG5cdFx0XHR4aHIuc2VuZCgpO1xuXHRcdH0pO1xuXHR9XG5cblx0aW5pdCgpIHtcblx0XHR0aGlzLmNvbnRyb2xsZXIuaW5pdCgpO1xuXHR9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEFwcDsiLCIvKmpzaGludCBlc3ZlcnNpb246IDYgKi9cblxuY2xhc3MgQ29udHJvbGxlciB7XG5cdGNvbnN0cnVjdG9yKGFwcCkge1xuXHRcdHRoaXMuYXBwID0gYXBwO1xuXHR9XG5cblx0aW5pdCgpIHtcblx0XHR0aGlzLmFwcC52aWV3LnJlbmRlcigpO1xuXHR9XG59XG5cbmV4cG9ydCBkZWZhdWx0IENvbnRyb2xsZXI7IiwiLypqc2hpbnQgZXN2ZXJzaW9uOiA2ICovXG5cbmNsYXNzIFN0b3JlIHtcblx0Y29uc3RydWN0b3IoYXBwKSB7XG5cdFx0dGhpcy5hcHAgPSBhcHA7XG5cdH1cblxuXHRnZXRPYmplY3RzTmVhcmJ5KCkge1xuXHRcdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHR0aGlzLmFwcC5nZXRDb29yZHMoKVxuXHRcdFx0XHQudGhlbihjb29yZHMgPT4ge1xuXHRcdFx0XHRcdC8vIEdldCB0aGUgZmlyc3QgYWRkcmVzcyBtYXRjaGluZyB0aGUgY29vcmRpbmF0ZXNcblxuXHRcdFx0XHRcdGNvbnN0IGdldFN0cmVldHMgPSB0aGlzLmFwcC5oYW5kbGVSZXF1ZXN0KCdHRVQnLCBgJHt0aGlzLmFwcC5jb25maWcuZ2VvTmFtZXMuYmFzZVVybH0mbGF0PSR7Y29vcmRzLmxhdGl0dWRlfSZsbmc9JHtjb29yZHMubG9uZ2l0dWRlfSZ1c2VybmFtZT0ke3RoaXMuYXBwLmNvbmZpZy5nZW9OYW1lcy51c2VyTmFtZX1gKTtcblx0XHRcdFx0XHRjb25zdCBnZXRDaXR5ID0gdGhpcy5hcHAuaGFuZGxlUmVxdWVzdCgnR0VUJywgYCR7dGhpcy5hcHAuY29uZmlnLmdvb2dsZS5iYXNlVXJscy5tYXBzfT9sYXRsbmc9JHtjb29yZHMubGF0aXR1ZGV9LCR7Y29vcmRzLmxvbmdpdHVkZX0ma2V5PSR7dGhpcy5hcHAuY29uZmlnLmdvb2dsZS5rZXl9YCk7XG5cblx0XHRcdFx0XHRQcm9taXNlLmFsbChbZ2V0U3RyZWV0cywgZ2V0Q2l0eV0pXG5cdFx0XHRcdC50aGVuKHJlc3VsdHMgPT4ge1xuXHRcdFx0XHRcdGxldCBzdHJlZXRzID0gcmVzdWx0c1swXTtcblx0XHRcdFx0XHRsZXQgY2l0eSA9IHJlc3VsdHNbMV07XG5cblx0XHRcdFx0XHRzdHJlZXRzID0gc3RyZWV0cy5zdHJlZXRTZWdtZW50Lm1hcChzdHJlZXQgPT4ge1xuXHRcdFx0XHRcdFx0cmV0dXJuIHN0cmVldC5uYW1lO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdHN0cmVldHMgPSBbLi4ubmV3IFNldChzdHJlZXRzKV07XG5cdFx0XHRcdFx0c3RyZWV0cyA9IHRoaXMuYXBwLnV0aWxzLmZpbHRlckFycmF5KHN0cmVldHMsICcwJyk7XG5cblx0XHRcdFx0XHRjaXR5ID0gY2l0eS5yZXN1bHRzWzBdO1xuXHRcdFx0XHRcdGNpdHkgPSB0aGlzLmFwcC51dGlscy5idWlsZEFkZHJlc3MoY2l0eS5hZGRyZXNzX2NvbXBvbmVudHMpO1xuXG5cdFx0XHRcdFx0Y29uc3Qgb2JqZWN0UmVxcyA9IHN0cmVldHMubWFwKHN0cmVldCA9PiB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gdGhpcy5hcHAuZmV0Y2hSZXF1ZXN0KGAke3RoaXMuYXBwLmNvbmZpZy5mdW5kYS5iYXNlVXJscy5zZWFyY2h9LyR7dGhpcy5hcHAuY29uZmlnLmZ1bmRhLmtleX0/dHlwZT1rb29wJnpvPS8ke2NpdHl9LyR7c3RyZWV0fSZwYWdlPTEmcGFnZXNpemU9MjVgKTtcblx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdFByb21pc2UuYWxsKG9iamVjdFJlcXMpXG5cdFx0XHRcdC50aGVuKHJlc3VsdHMgPT4ge1xuXHRcdFx0XHRcdFx0Y29uc3Qgc3RyZWV0cyA9IHJlc3VsdHMubWFwKHN0cmVldCA9PiB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBzdHJlZXQuT2JqZWN0cztcblx0XHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0XHQvLyBzb3VyY2UgYXJyYXkgY29uY2F0ZW5hdGlvbiBzb2x1dGlvbjogaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8yNzI2NjU1MC9ob3ctdG8tZmxhdHRlbi1uZXN0ZWQtYXJyYXktaW4tamF2YXNjcmlwdCNhbnN3ZXItMzc0Njk0MTFcblx0XHRcdFx0XHRcdGNvbnN0IG9iamVjdHMgPSBbXS5jb25jYXQuYXBwbHkoW10sIHN0cmVldHMpO1xuXG5cdFx0XHRcdFx0XHRyZXNvbHZlKG9iamVjdHMpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0pXG5cdFx0XHQuY2F0Y2goZXJyb3IgPT4ge1xuXHRcdFx0XHRyZWplY3QoZXJyb3IpO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU3RvcmU7IiwiLypqc2hpbnQgZXN2ZXJzaW9uOiA2ICovXG5jbGFzcyBVdGlscyB7XG5cdGJ1aWxkQWRkcmVzcyhjb21wb25lbnRzKSB7XG5cdFx0Y29tcG9uZW50cyA9IGNvbXBvbmVudHMuZmlsdGVyKGNvbXBvbmVudCA9PiB7XG5cdFx0XHQvLyByZXR1cm4gY29tcG9uZW50LnR5cGVzLmluY2x1ZGVzKCdyb3V0ZScpIHx8IGNvbXBvbmVudC50eXBlcy5pbmNsdWRlcygnbG9jYWxpdHknKTtcblx0XHRcdHJldHVybiBjb21wb25lbnQudHlwZXMuaW5jbHVkZXMoJ2xvY2FsaXR5Jyk7XG5cdFx0fSk7XG5cblx0XHRjb21wb25lbnRzID0gY29tcG9uZW50cy5tYXAoY29tcG9uZW50ID0+IHtcblx0XHRcdHJldHVybiBjb21wb25lbnQubG9uZ19uYW1lO1xuXHRcdH0pO1xuXG5cdFx0cmV0dXJuIGNvbXBvbmVudHMucmVkdWNlKChidWZmZXIsIGN1cnJlbnQpID0+IHtcblx0XHRcdHJldHVybiBgJHtidWZmZXJ9LyR7Y3VycmVudH1gO1xuXHRcdH0pO1xuXHR9XG5cblx0Ly8gUmVtb3ZlIGl0ZW0gZnJvbSBhcnJheSBpZiBpdCBjb250YWlucyBhIHN1YnRyaW5nXG5cdGZpbHRlckFycmF5KGFycmF5LCBzdWJzdHJpbmcpIHtcblx0XHRyZXR1cm4gYXJyYXkuZmlsdGVyKGl0ZW0gPT4ge1xuXHRcdFx0cmV0dXJuICghaXRlbS5pbmNsdWRlcyhzdWJzdHJpbmcpKTtcblx0XHR9KTtcblx0fVxufVxuXG5leHBvcnQgZGVmYXVsdCBVdGlsczsiLCIvKmpzaGludCBlc3ZlcnNpb246IDYgKi9cblxuY2xhc3MgVmlldyB7XG5cdGNvbnN0cnVjdG9yKGFwcCkge1xuXHRcdHRoaXMuYXBwID0gYXBwO1xuXHR9XG5cblx0cmVuZGVyKCkge1xuXHRcdHRoaXMuYXBwLnN0b3JlLmdldE9iamVjdHNOZWFyYnkoKVxuXHRcdFx0LnRoZW4ob2JqZWN0cyA9PiB7XG5cdFx0XHRcdGNvbnN0ICRyZXN1bHRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnJlc3VsdHMnKTtcblx0XHRcdFx0Y29uc3QgJHJlc3VsdHNMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Jlc3VsdHMtbGlzdCcpO1xuXG5cdFx0XHRcdG9iamVjdHMubWFwKG9iamVjdCA9PiB7XG5cdFx0XHRcdFx0Y29uc3QgbGlzdEl0ZW0gPSBgXG5cdFx0XHRcdFx0PGxpIGNsYXNzPVwib2JqZWN0XCI+XG5cdFx0XHRcdFx0XHQ8aW1nIHNyYz1cIiR7b2JqZWN0LkZvdG9MYXJnZX1cIiBhbHQ9XCIke29iamVjdC5BZHJlc31cIj5cblx0XHRcdFx0XHRcdDxhIGhyZWY9XCIjZGV0YWlscy8ke29iamVjdC5HbG9iYWxJZH1cIj5cblx0XHRcdFx0XHRcdFx0PGgzPiR7b2JqZWN0LkFkcmVzfTwvaDM+XG5cdFx0XHRcdFx0XHQ8L2E+XG5cdFx0XHRcdFx0XHQ8c3Bhbj7igqwke29iamVjdC5Lb29wcHJpanMudG9Mb2NhbGVTdHJpbmcoJ2N1cnJlbmN5Jyl9PC9zcGFuPlxuXHRcdFx0XHRcdDwvbGk+XG5cdFx0XHRcdFx0YDtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhsaXN0SXRlbSk7XG5cdFx0XHRcdFx0JHJlc3VsdHNMaXN0Lmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywgYCR7bGlzdEl0ZW19YCk7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRcdCRyZXN1bHRzLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuXHRcdFx0XHR0aGlzLnNob3dMb2FkZXIoZmFsc2UpO1xuXHRcdFx0fSlcblx0XHRcdC5jYXRjaChlcnIgPT4ge1xuXHRcdFx0XHRjb25zb2xlLmxvZyhlcnIpO1xuXHRcdFx0fSk7XG5cdH1cblxuXHRzaG93TG9hZGVyKHNob3cpIHtcblx0XHRjb25zdCBsb2FkZXIgPSAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxvYWRlci1jb250YWluZXInKTtcblx0XHRpZiAoc2hvdykge1xuXHRcdFx0bG9hZGVyLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRsb2FkZXIuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG5cdFx0fVxuXHR9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFZpZXc7Il19"}